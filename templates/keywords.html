{% extends 'base.html' %}

{% block title %}Quản lý từ khóa - PDF Converter{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Danh sách từ khóa</h4>
            </div>
            <div class="card-body">
                {% if keywords %}
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Từ khóa</th>
                                    <th>Mô tả</th>
                                    <th>Số kết quả</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for keyword in keywords %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ keyword.keyword }}</td>
                                    <td>{{ keyword.description or '' }}</td>
                                    <td><span class="badge rounded-pill bg-info">{{ keyword.matches|length }}</span></td>
                                    <td>
                                        <form action="{{ url_for('delete_keyword', id=keyword.id) }}" method="post" class="d-inline" onsubmit="return confirm('Bạn có chắc chắn muốn xóa từ khóa này?');">
                                            <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                                        </form>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="alert alert-info">
                        Chưa có từ khóa nào được thêm. Hãy thêm từ khóa mới.
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">Thêm từ khóa mới</h5>
            </div>
            <div class="card-body">
                <form action="{{ url_for('manage_keywords') }}" method="post">
                    <div class="mb-3">
                        <label for="keyword" class="form-label">Từ khóa</label>
                        <input type="text" class="form-control" id="keyword" name="keyword" required>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Mô tả (không bắt buộc)</label>
                        <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success">Thêm từ khóa</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">Hướng dẫn</h5>
            </div>
            <div class="card-body">
                <p>Thêm các từ khóa cần tìm kiếm trong file PDF. Các từ khóa này sẽ được sử dụng để tìm kiếm trong các file TXT đã được chuyển đổi từ PDF.</p>
                <p>Hệ thống sẽ trích xuất nội dung xung quanh các từ khóa này và lưu trữ trong cơ sở dữ liệu.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}